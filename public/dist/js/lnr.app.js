angular.module("lnr",["ui.router","ngMaterial","luegg.directives","lnr.controllers","lnr.services"]);var lnrControllers=angular.module("lnr.controllers",[]);lnrControllers.controller("lnrChat",["$scope","messageProcessor",function(a,b){function c(a,b){return b.message_thread.push(a)}a.title="Laura and Rob",a.userTyping={},a.users=[{name:"Laura",position:"Marketing Manager",location:"Sydney, Australia",message:{message:"",status:"draft",sender:"Laura",date:""},message_thread:[],session_information:{started:new Date,connected_to:{name:"Bob",position:"CEO",location:"Strasbourg, France"}}},{name:"Bob",position:"CEO",location:"Strasbourg, France",message:{message:"",status:"draft",sender:"Bob",date:""},message_thread:[],session_information:{started:new Date,connected_to:{name:"Laura",position:"Marketing Manager",location:"Sydney, Australia"}}}],a.submitNewMessage=function(d){d.message.status="pending",d.message.date=new Date;var e=new b.updateMessageThread(d.message);e.promise.then(function(b){angular.forEach(a.users,function(a){console.log(b),c(b,a),a.message={message:"",status:"draft",sender:a.name,date:""}})},function(a){console.log("error")})},a.userIsTyping=function(b,c){c?a.userTyping=a.users[b]:a.userTyping={}}}]);var lnrServices=angular.module("lnr.services",[]);lnrServices.factory("messageProcessor",["$q","$timeout",function(a,b){var c={};return c.updateMessageThread=function(c){var d=a.defer();return b(function(){c.status="delivered",d.resolve(c)},1e3*Math.random()),d},c}]);