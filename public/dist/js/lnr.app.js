angular.module("lnr",["ui.router","ngMaterial","luegg.directives","lnr.controllers","lnr.services"]);var lnrControllers=angular.module("lnr.controllers",[]);lnrControllers.controller("lnrChat",["$scope","sessionProvider","messageProcessor",function(a,b,c){a.title="Laura and Rob",a.userTyping={};var d=new b.initiateConnection;d.promise.then(function(b){a.session=b,angular.forEach(a.session.users,function(a){a.new_message=new c("",a.name)})}),a.submitNewMessage=function(b){b.new_message.status="pending",b.new_message.processMessage(b.new_message).promise.then(function(d){d.status="Delivered",a.session.messageThread.push(d),b.new_message=new c("",b.name)})},a.userIsTyping=function(b,c){c?a.userTyping=a.session.users[b]:a.userTyping={}}}]);var lnrServices=angular.module("lnr.services",[]);lnrServices.factory("sessionProvider",["$q","$timeout",function(a,b){var c={},d=function(a){this.startingDate=new Date,this.users=a,this.messageThread=[]};return c.initiateConnection=function(){var c=a.defer(),e=new d([{name:"Laura",position:"Marketing Manager",location:"Sydney, Australia",connected_to:1},{name:"Bob",position:"CEO",location:"Strasbourg, France",connected_to:0}]);return b(function(){c.resolve(e)},1e3*Math.random()),c},c}]),lnrServices.factory("messageProcessor",["$q","$timeout",function(a,b){var c=function(a,b){this.date=new Date,this.sender=b,this.message="",this.status="draft"};return c.prototype.processMessage=function(c){var d=a.defer();return b(function(){d.resolve(c)},1e3*Math.random()),d},c}]);